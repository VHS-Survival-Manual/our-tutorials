\documentclass[a5paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{ctex}
\usepackage{amsmath}
\usepackage{ulem}
\usepackage{geometry}
\geometry{scale=0.85}
\usepackage{hyperref}
\hypersetup{
    colorlinks=true, linkcolor=cyan,
    filecolor=blue, urlcolor=red,
    citecolor=green
}

\title{\Huge \textbf{排列组合笔记}}
\author{\href{https://github.com/Zhou-Yi-Xuan}{easonzhou0801@163.com}}
\date{\today}

\begin{document}
\maketitle
%\begin{center}
%	\textbf{该笔记已加入\href{https://github.com/VHS-Survival-Manual/}{VHSS Manual}项目}
%\end{center}
\tableofcontents

\newpage
\section{引言}
排列数与组合数是组合数学中的基石概念，它们在解决与选择、排序相关的问题时发挥着核心作用。排列数关注于从一组元素中选取特定数量的元素，并考虑这些元素的不同排列方式，体现了顺序的重要性。而组合数则侧重于选取元素的组合，即不考虑这些元素的排列顺序，只关心哪些元素被选中。这两个概念虽然紧密相关，但通过是否考虑顺序这一关键区别，它们适用于不同类型的数学问题和实际应用场景。在解决概率问题、组合优化、统计学乃至计算机科学中的算法设计时，排列数与组合数都是不可或缺的工具。

排列数与组合数在实际生活中的应用广泛而深入，它们帮助我们理解和解决各种选择与排序问题。以下是一些具体的应用实例：
\begin{enumerate}
    \item \textbf{日程安排与时间管理：}在安排会议或活动时，需要考虑不同人员的参与顺序或组合，这涉及到排列的计算。例如，如果一个团队有5名成员，需要决定谁在会议中发言的顺序，这就是一个排列问题。
    \item \textbf{密码学：}在设置密码时，用户可能会从特定的字符集中选择字符来创建密码，这既可以用排列（如果顺序重要）也可以用组合（如果顺序不重要，只关心哪些字符被选中）来计算可能的密码组合数量。
    \item \textbf{体育比赛：}比如在足球联赛中，计算每两队之间进行比赛的场次，这是一个组合问题，因为比赛双方的顺序不影响比赛本身。而在决定比赛的出场顺序时，则涉及排列。
    \item \textbf{购物搭配：}个人在选择衣物搭配时，会考虑有多少种不同的上衣和裤子可以组合，这是组合问题。如果还要考虑搭配的顺序，比如先穿哪件，那就是排列问题。
    \item \textbf{抽奖与彩票：}彩票号码的选择，特别是那些要求顺序的彩票，使用排列来计算中奖的可能性；而不考虑顺序的彩票则使用组合。
    \item\textbf{ 产品设计与市场策略：}企业设计产品套餐或营销组合时，会用到组合数来确定不同产品如何组合以满足不同消费者的需求，而排列则可能用于决定推广活动的顺序。
    \item \textbf{计算机科学：}在算法设计中，排列和组合用于计算算法的复杂度，比如在算法的搜索空间中确定有效的路径或解决方案。
    \item \textbf{统计学与概率论：}在分析事件发生的可能性时，排列和组合帮助计算不同情况下的概率，如抽样方法的分析。
    \item \textbf{社交网络：}在社交网络中，计算可能的社交圈子或群组形成方式，以及信息传播的路径，都可能用到组合数。
    \item \textbf{城市规划：}城市绿化或路灯布局时，考虑不同植物或路灯的排列组合，以达到最佳的视觉效果和功能布局。
\end{enumerate}
通过这些实例，我们可以看到排列数与组合数在日常生活决策、科学研究和工程设计中的重要性，它们使我们能够量化选择的多样性，优化决策过程，并理解复杂系统中的可能性。

排列数在解决需要考虑顺序的问题时至关重要，如安排比赛顺序、密码生成等场景。\\

\textbf{我承认上面的文本是~AI~生成的}，快谢谢\href{https://zhida.zhihu.com/}{知乎直答}！顺便提醒一下。在下面也会有很多使用~AI~生成、优化的段落，请大家不要介意，毕竟省时省力的方法没人不喜欢。

\section{\textbf{计数原理}}

{\large 分类计数原理}~~完成一件事，有$n$类办法，在第1类办法中有$m_1$种不同的办法，在第$n$类办法中有$m_n$种不同的办法，那么完成这件事共有$\mathbf{N}m_{1}+m_{2}+\cdots{}+m_{n}$种不同的办法。

{\large 分步计数原理}~~完成一件事，有$n$类办法，在第1类办法中有$m_1$种不同的办法，在第$n$类办法中有$m_n$种不同的办法，那么完成这件事共有$\mathbf{N}m_{1}\cdot{}m_{2}\cdot{}\cdots{}\cdot{}m_{n}$种不同的办法。

\subsection{例题}

{\color{blue} 例一：}乔布斯有4个苹果和3个菠萝，库克要选择一种水果，问有多少种选择

{\color{blue} 解答：}$4+3=7$

{\color{blue} 例二：}乔布斯有4个苹果和3个菠萝以及5个柚子，库克要选择两种水果，问有多少种选择

{\color{blue} 解答：}$4\times{}3\times{}5=60$

\section{\textbf{排列}}

\subsection{排列问题}

我们先从\textbf{排列问题}开始学习。

假设水果篮中有苹果、香蕉、橙子、葡萄和芒果五种不同的水果，若从中选取两种水果按特定顺序排列（例如「苹果→香蕉」和「香蕉→苹果」视为两种不同的排列），则不同的顺序会直接影响排列结果。例如，从5种水果中选2种排列时，排列数为$\textbf{P}(5,~2) = 5 \times 4 = 20$种

\textbf{——}这类似于将水果按不同顺序摆成果盘（如香蕉在前或苹果在前），每种顺序代表独特的外观。

\begin{enumerate}
    \item \textbf{有序性：}如同水果在果盘中的位置（首位放苹果或首位放葡萄）直接影响最终形态；
    \item \textbf{无序性：}一种水果不能同时占据两个位置（例如苹果不能既在首位又在次位）。
\end{enumerate}

而组合问题则类似「水果盲盒」：只需关注选中的水果种类（如苹果和葡萄），不关心被选中的顺序（苹果先放或葡萄先放均视为同一种组合）。

\subsubsection{排列问题概括}

我们把被选取的对象（上面的水果中的任意一个）叫做元素。那么上面的问题就是从五个不同的元素中任选两个元素，然后按照一定的顺序排成一列，从$\mathit{n}$个不同元素中任取$m(m \le n)$个元素，按照一定的顺序排成一列，叫作从$\mathit{n}$个不同元素中任取$\mathit{m}$个元素的一个\textbf{排列}。

\subsection{排列数公式}
这里的概念来自\textbf{教科书\footnote{即北师大出版的中职学校公共基础课程教材}}上，我们直接在下面引用。

一般地，从$\mathit{n}$个不同元素中任取$m(m \le n)$个元素的所有排列的个数，叫做从$\mathit{n}$个不同元素中任取$\mathit{m}$个元素的\textbf{排列数}，用符号$\textbf{A}_{n}^{m}$表示。

很简单，就是有5个水果然后要任选2种水果，并求出共可以组成多少个没有重复组合的两种水果。简而言之就是求在$\textbf{m}$中任取$\textbf{n}$个水果共可以有多少种无重复水果组合。

但在这之前我们来了解下什么是\textbf{阶乘}

\subsubsection{阶乘}\label{sec:factorial}
阶乘，是数学中的一个基本概念，表示为$n!$，它定义为所有小于及等于$n$的正整数的乘积。具体来说，对于一个非负整数$n$，其阶乘$n!$计算方式是从1开始，一直乘到$n$，即：
\begin{equation*}
    n! = 1 \times 2 \times 3 \times \cdots \times n
\end{equation*}

没错，又是~AI~生成。但这个真的很简单，相信聪明的你很快就理解了。在大多数情况下十位数的阶乘往往需要使用计算器来辅助计算，如：$12!$，你能快速地算出结果吗？我觉得你不是电脑，答案是\textbf{479001600}，我相信没有人能算的这么快，一般建议大家熟记前十位阶乘的结果，这就够了。

\begin{flushleft}
	{\color{red} 注意：}我们定义\textbf{$0! = 1$（零的阶乘等于一）}
\end{flushleft}

\noindent\hfil$*$\hfil$*$\hfil$*$\hfil \\

\textbf{那怎么求 $\textbf{A}_{n}^{m}$ 呢？} 

我们知道每一个排列都是从$n$个不同元素中任取$m(m \le n)$个元素，按照顺序排成一列的，所以我们可以把每个排列看成从$n$个不同元素中取$m$次，当然，拿都拿了就不会放回去了。就这样，计算它的排列数可以分$m$步完成。

根据分布计数原理，从$n$个不同元素中取出$m$个元素的排列数即为
\begin{equation*}
    \textbf{A}_{n}^{m} = n(n-1)(n-2)*\cdots{}*(n-m+1)
\end{equation*}
在这个公式中，右边是从正整数$n$开始的$n$个连续的正整数相乘，即从正整数$1$到$n$的连续积，这个连续积就是上面的\textbf{阶乘（详情：\ref{sec:factorial}）}。

所以，从$n$个不同元素的全排列数公式为
\begin{equation*}
    \textbf{A}_{n}^{n}=n!~=n(n-1)(n-2)*\cdots{}*3*2*1
\end{equation*}
因为$(n-m)!~=(n-m)(n-m-1)*(n-m-2)*\cdots{}*3*2*1$，所以排列数公式还可以写成
\begin{equation}
    \textbf{A}_{n}^{m}=\frac{n!}{(n-m)!}
\end{equation}

还记得上面我们关于\textbf{阶乘}的定义吗？$0!~=~1$，所以，当$n=m$时，$(n-m)!~=0!~=1$，上述公式依然成立

\subsubsection{例题}
{\color{blue} 例一：}{请计算$\textbf{A}_{5}^{2}$}~与~$\textbf{A}_{11}^{3}$ 的值。

{\color{blue} 解答：}$\textbf{A}_{5}^{2} = 5 \times 4 = 20$，$\textbf{A}_{11}^{3}=11 \times 11 \times 10 \times 9 = 990$

在这里就不给太多例题了，这一章的重点还在后面。下一节就是\textbf{组合}，如果上面的东西你学会了那么下一节就不会有任何问题。

\section{\textbf{组合}}

\subsection{组合问题}

首先要我们要搞懂怎样判断哪些是组合问题、哪些是排列问题。还是以上面的\underline{水果篮子}为例。
\begin{itemize}
    \item 从五种水果中任选三种，分别送给\textbf{三}个不同的人，请问共有多少种方案？
    \item 从五种水果中任选两种，然后送给\textbf{一}个人，共可组成多少种方案？
    \item 从2，3，5，7，11~这5个数中任取两个数，共可组成多少个不同的分数？\sout{（不用水果了）}
    \item 从2，3，5，7，11~这5个数中任取两个数，共可组成多少个不同的真分数？
\end{itemize}

\leftline{{\color{blue} {\large 解答}}}
\begin{itemize}
    \item 这是\textbf{排列问题}；$n$个水果分给$m$个人（$n \ne m$），因为每人所得的水果不一样。
    \item 这是\textbf{组合问题}；水果都给一个人了，不管选取顺序如何结果都相同。%（$\textbf{A}_{5}^{1}$）
    \item 这是\textbf{排列问题}；若选取到5和7，它们既可以组合成$\frac{7}{5}$也可以组合成$\frac{5}{7}$，很明显有两种组合方法（分母与分子的位置可以互换。没有唯一性）
    \item 这是\textbf{组合问题}；还是跟上面一样选取到5和7，但要求是组合成\textbf{真分数\footnote{什么是真分数？！简单来说就是分母大于分子的分数}}，所以就只有一种组合。
\end{itemize}

\subsubsection{组合问题概括}
从$n$个不同元素中任取$m(m \le n)$个元素，组成一组，叫做从$n$个不同元素中取出$m$个元素的一个\textbf{组合}。

如果两个组合中的元素完全一致，无论元素选取的顺序如何，那么它们就是相同的组合。只有当两个组合中的元素不完全相同时，它们才是不同的组合。这里是不是很像我们在高一学习的\textbf{集合}，还记得集合中的概念吗？

它们两个的共同点：
\begin{enumerate}
    \item \textbf{无序性的本质：} 组合问题中的元素选择（例如从5种水果中选2种）与集合中的元素存储，均不依赖顺序。例如集合中的$\{ a,~b\}$ 与 $\{ b,~a\}$ 它们的本质是相同的。
    \item \textbf{唯一性的映射：} 集合要求元素互异，而组合问题中选取的元素也同样如此。
\end{enumerate}
研究从$n$个不同元素中任取$m(m \le n)$个元素的所有组合的个数，这类计数问题叫做\textbf{组合问题}。

\subsection{组合数公式}

排列数是在$m$个数中任选$n$个数，然后排列出它们的具体数量，而组合数则是求所有排列数的个数，也就是将每个单独的排列数中包含的个数相加。下面就是它的抽象概括。

从$n$个不同元素中任取$m(m \le n)$个元素的所有组合的个数，叫做从$n$个不同元素任取$m$个元素的\textbf{组合数}，用符号$\textbf{C}_{n}^{m}$表示。

一般地，求出$n$个不同元素中任取$m$个元素的排列组合数$\textbf{A}_{n}^m$，可以分两步完成。
\begin{enumerate}
    \item 求出从$n$个不同的元素中任取$m$个元素的组合数，有$\textbf{C}_n^{m}$个；
    \item 对每一个组合中的$m$个元素进行全排列，其排列数均为$\textbf{A}_{m}^{m}$。
\end{enumerate}
根据分步计数原理，可得
\begin{equation}
    \textbf{A}_{m}^{n} = \textbf{C}_{n}^{m} \times \textbf{A}_{m}^{m}
\end{equation}
因此，组合数的计算公式为
\begin{equation}
    \textbf{C}_{n}^{m}=\frac{\textbf{A}_{n}^{m}}{\textbf{A}_{m}^{m}}=\frac{n(n-1)(n-2)\cdot{}\cdots{}\cdot{}(n-m+1)}{m!}=\frac{n!}{m!(n-m)!}
\end{equation}
其中$m \in \mathbf{N}$，$n \in \mathbf{N}_{+}$，且$m \le n$。这个公式就是\textbf{组合数公式}。

\subsubsection{组合数的不同写法}

在研究离散数学\footnote{即组合数学}时我们常常会碰到一些不同的写法，如：$\binom{n}{m}$、$\textbf{P}(n,~k)$以及上面我们所用的$\textbf{C}_{n}^m$等，在我们继续深入理解组合数学时往往会因为这些符号的写法而感到迷惑，这里就列出它们之间的关系：
\begin{equation*}
    \textbf{C}_{n}^{r} = \binom{n}{r} = \textbf{P}(n,~r)
\end{equation*}

上面的等式则为组合数的三种写法，在众多高等数学教科书中更常用的是圆括号表达组合数$\binom{n}{m}$，而我们的笔记中所使用的则是苏式表达$\textbf{C}_{n}^m$。我们发现该等式的后面还有一个大写$\textbf{P}$的表达方式，实际上这是老旧的表达方式从本质上讲，$\textbf{P}(n,~r)$与$\textbf{C}_{n}^m$是一样的，$r$即为$m$，所以用$P$表达法\footnote{暂时找不到标准称呼}我们可以得到另一个等式：
\begin{equation}
    \frac{\textbf{P}(n,~r)}{r!} = \textbf{A}_{n}^r
\end{equation}

让我们把$r$换成$m$这样更好理解。我们来验证这个等式。
\begin{equation*}
    \begin{aligned}
        &\textbf{A}_{n}^m = \textbf{C}_{m}^n \cdot \textbf{A}_{m}^{m} \\
        &\textbf{A}_{n}^m = \textbf{P}(n,~m) \cdot m! \\
        &\frac{\textbf{A}_{n}^m}{m!} = \textbf{P}(n,~m)
    \end{aligned}
\end{equation*}

证毕！就是这样，在后面的"二项式定理\ref{sec:factorial}"中我们还会看到它。

\subsection{组合数的两个性质}

组合数有如下的两种性质。
\begin{flushleft}{\color{blue} 性质一}\end{flushleft}
\begin{equation}
    \textbf{C}_{n}^{m}=\textbf{C}_{n}^{n-m}
\end{equation}
\begin{flushleft}
	{\color{blue} 证明}
\end{flushleft}
\begin{equation*}
    \begin{aligned}
        &\textbf{C}_{n}^{m} = \frac{n!}{m!(n-m)!} \\
        &\textbf{C}_{n}^{n-m} = \frac{n!}{(n-m)![n-(n-m)]!} = \frac{n!}{(n-m)!m!}
    \end{aligned}
\end{equation*}

所以$\textbf{C}_{n}^{m}=\textbf{C}_{n}^{m-n}$。

我们页可以这样理解，从$n$个不同的元素中取出$m$个元素组成一组后，剩下的$(n-m)$个元素自然也组成一组，即每取出$m$个元素都有唯一的$(n-m)$个元素之对应。所以，从$n$个不同的元素中取出$m$个元素的组合数一定与从$n$个不同的元素中取出$(n-m)$个元素的组合数相等。

组合数的第二个性质
\begin{flushleft}{\color{blue} 性质二}\end{flushleft}
\begin{equation}
    \textbf{C}_{n}^{m}+\textbf{C}_{n}^{m-1}=\textbf{C}_{n+1}^{m}
\end{equation}
\begin{flushleft}
	{\color{blue} 证明}
\end{flushleft}
\begin{equation*}
    \begin{aligned}
        \textbf{C}_{n}^{m}+\textbf{C}_{n}^{m-1} &= \frac{n!}{m!(n-m)!}+\frac{n!}{(m-1)![n-(m-1)]!} \\
        &= \frac{n!(n-m+1)}{m!(n-m+1)!}+\frac{n!m}{m!(n-m+1)!} \\
        &= \frac{n![(n-m+1)+m]}{m!(n-m+1)!} \\
        &= \frac{(n+m)!}{m!(n-m+1)!}
        &= \textbf{C}_{n+1}^{m}
    \end{aligned}
\end{equation*}

所以$\textbf{C}_{n}^{m}+\textbf{C}_{n}^{m-1}=\textbf{C}_{n+1}^{m}$。

我们也可以直观地理解以上的性质，从$n$个苹果和1个菠萝中任取$m$个水果，可以用组合数$\textbf{C}_{n+1}^{m}$表示，也可以将其分为两类：一类分到的$m$个水果都是苹果，则有$\textbf{C}_{n}^{m}$种分法；另一类抽到的$m$个水果中有一个是菠萝，则有$\textbf{C}_{n}^{m-1}$，故共有$\textbf{C}_{n}^{m}+\textbf{C}_{n}^{m-1}$种取法，所以$\textbf{C}_{n}^{m}+\textbf{C}_{n}^{m-1}=\textbf{C}_{n+1}^{m}$。

\subsubsection{例题}

{\color{blue} 例一：}{请计算$\textbf{C}_{5}^{2}$}~与~$\textbf{C}_{9}^{3}$ 的值。

{\color{blue} 解答：}$\textbf{C}_{5}^{2}=\frac{5\times{}4}{2!}=10$，$\textbf{C}_{6}^{3}=\frac{\textbf{A}_{6}^{3}}{\textbf{A}_{n}^{m}}=\frac{6\times{}5\times{}4}{3!} = 15$

{\color{blue} 例二：}{请计算$\textbf{C}_{100}^{98}$}~与~$\textbf{C}_{9}^{3}+\textbf{C}_{9}^{4}$ 的值。

{\color{blue} 解答：}
\begin{equation*}
    % 考虑使用表格
    \begin{aligned}
        \textbf{C}_{100}^{98} &= \textbf{C}_{100}^{2} \\
        &=  \frac{\textbf{A}_{100}^{2}}{2!} \\
        &= 4950
    \end{aligned}
\end{equation*}

{\color{blue} 例三：}{请计算 $\textbf{C}_{7}^{2}+\textbf{C}_{7}^{3}+\textbf{C}_{8}^{4}+\textbf{C}_{9}^{5}+\textbf{C}_{10}^{6}$ 的值。

{\color{blue} 解答：}
\begin{equation*}
    \begin{aligned}
        \textbf{C}_{7}^{2}+\textbf{C}_{7}^{3}+\textbf{C}_{8}^{4}+\textbf{C}_{9}^{5}+\textbf{C}_{10}^{6} &= \frac{\textbf{A}_{7}^{2}}{2!}+\frac{\textbf{A}_{7}^{3}}{3!}+\frac{\textbf{A}_{8}^{4}}{4!}+\frac{\textbf{A}_{9}^{5}}{5!}+\frac{\textbf{A}_{10}^6}{6!}\\
        &= \frac{42}{2}+\frac{215}{6}+\frac{1680}{24}+\frac{15120}{120}+\frac{151200}{720}\\
        &= 462
    \end{aligned}
\end{equation*}

\section{\textbf{排列与组合的应用}}

排列与组合的应用广泛且深入多个领域，其核心在于处理元素的选择与顺序问题。

排列组合问题与组合问题的区别;
\begin{center}
    排列问题 \~ 与顺序有关； \\
    组合问题 \~ 与顺序无关
\end{center}

排列问题与组合问题的联系：\\
排列问题实际上是先从$n$个不同元素中取出$m$个元素（组合问题），再把这$m$个元素全排列。\\
排列数与组合数的关系：\\
\begin{equation}
    \textbf{A}_{n}^m = \textbf{C}_{m}^n \cdot \textbf{A}_{m}^{m}
\end{equation}

\subsection{例题}
% 强烈的怨念
在“网络建设与运维”技能大赛中，共有20支队伍，可是比赛场地只有四间教室，在抽取比赛顺序时将20支队伍分成四个小组，小组内采用单循环赛制（每两队比赛一场）决出前两名参加国赛。请问共需比赛多少场？

{\color{blue} 解答} $2\times{}\textbf{C}_{8}^{2}+\textbf{A}_{4}^{2}$

\subsection{举例}

\section{\textbf{二项式定理}}\label{sec:binomial}

这里就直接放公式了，关于二项式定理的历史大家可以自行搜索。
\begin{equation}
    (a+b)^n = {\textstyle \sum_{k=0}^{n}} \binom{n}{k} a^{n-k}b^k
\end{equation}

当$n$为整数、其主要代表系数时用$\textbf{C}$形式，当$n$拓展为实数$\alpha$、$\alpha$和$k$是运算等相对复杂时只能括号。请大家在后面的学习中一定要注意它们之间的差异。

\section{公式总结}

\begin{table}[]
	\begin{tabular}{|lll|}
	排列数 & 组合数 & 二项式 \\
	$\textbf{A}_{n}^m = \frac{n!}{(n-m)!}$ & $\textbf{C}_{n}^m = \frac{\textbf{A}_{n}^m}{\textbf{A}_{m}^m}$ & \\
	$\textbf{A}_{n}^m = n!$ & $\textbf{A}_{n}^m = \textbf{C}_{n}^m \times \textbf{A}_{n}^n$ & \\
	    &     &
	\end{tabular}
\end{table}

\end{document}
